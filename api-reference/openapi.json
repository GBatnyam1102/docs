{
  "openapi": "3.0.0",
  "info": {
    "title": "BNPL API",
    "version": "1.0.0",
    "description": "Buy Now Pay Later API баримтжуулалт"
  },
  "servers": [
    {
      "url": "https://api.example.com",
      "description": "Production server"
    }
  ],
  "security": [
    {
      "basicAuth": []
    }
  ],
  "paths": {
    "/bnpl/info/user": {
      "get": {
        "summary": "Харилцагч лавлах",
        "description": "Харилцагчийн мэдээллийг РД-р лавлах. Харилцагчийн дугаар давхардсан бол \"DUP_\" гэсэн prefix-тэй ирнэ. Жишээ нь \"DUP_9999999\"",
        "operationId": "getUserInfo",
        "tags": ["Харилцагч"],
        "parameters": [
          {
            "name": "register",
            "in": "query",
            "required": true,
            "description": "Регистрийн дугаар",
            "schema": {
              "type": "string",
              "example": "ХХ00112233"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Амжилттай",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "integer",
                          "description": "Харилцагчийн дугаар",
                          "example": 269912
                        },
                        "mobileNumber": {
                          "type": "string",
                          "description": "Утасны дугаар",
                          "example": "88805256"
                        },
                        "registerCode": {
                          "type": "string",
                          "description": "Регистрийн дугаар",
                          "example": "ЕЛ96112917"
                        },
                        "firstName": {
                          "type": "string",
                          "description": "Нэр",
                          "example": "Тэгшжаргал"
                        },
                        "lastName": {
                          "type": "string",
                          "description": "Овог",
                          "example": "Мягмар"
                        },
                        "userAcct": {
                          "type": "string",
                          "nullable": true,
                          "description": "Дансны дугаар",
                          "example": null
                        }
                      },
                      "required": ["userId", "mobileNumber", "firstName", "lastName"]
                    },
                    "data": {
                      "nullable": true
                    },
                    "msgList": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "attrs": {
                      "type": "object"
                    },
                    "status": {
                      "type": "string",
                      "example": "Success"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "basicAuth": []
          }
        ]
      }
    },
    "/bnpl/merge/user": {
      "post": {
        "summary": "Харилцагч үүсгэх",
        "description": "Харилцагч үүссэн бол үүссэн харилцагчийн ID-г, үүссээгүй бол харилцагч шинээр үүсгэж ID-г буцаана",
        "operationId": "createUser",
        "tags": ["Харилцагч"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["mobileNumber", "registerCode", "firstName", "lastName", "userAcct"],
                "properties": {
                  "mobileNumber": {
                    "type": "string",
                    "description": "Утасны дугаар",
                    "minLength": 8,
                    "maxLength": 8,
                    "example": "88888888"
                  },
                  "registerCode": {
                    "type": "string",
                    "description": "Регистрийн дугаар",
                    "minLength": 10,
                    "maxLength": 10,
                    "example": "АА99112233"
                  },
                  "firstName": {
                    "type": "string",
                    "description": "Нэр",
                    "minLength": 1,
                    "maxLength": 50,
                    "example": "Тэгшжаргал"
                  },
                  "lastName": {
                    "type": "string",
                    "description": "Овог",
                    "minLength": 1,
                    "maxLength": 50,
                    "example": "Мягмар"
                  },
                  "userAcct": {
                    "type": "string",
                    "description": "Дансны дугаар"
                  },
                  "familyName": {
                    "type": "string",
                    "description": "Ургийн овог"
                  },
                  "refMobile": {
                    "type": "string",
                    "description": "Холбоо барих дугаар"
                  },
                  "refMobile1": {
                    "type": "string",
                    "description": "Холбоо барих дугаар (1)"
                  },
                  "eduLevelId": {
                    "type": "string",
                    "description": "Боловсролын түвшин",
                    "enum": ["1", "2", "4", "5", "6"]
                  },
                  "work": {
                    "type": "string",
                    "description": "Ажлын газар"
                  },
                  "address": {
                    "type": "string",
                    "description": "Хаяг"
                  }
                }
              },
              "example": {
                "mobileNumber": "88805256",
                "registerCode": "ЕЛ96112917",
                "firstName": "Тэгшжаргал",
                "lastName": "Мягмар"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Амжилттай",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "type": "integer",
                      "description": "Харилцагчийн дугаар",
                      "example": 269912
                    },
                    "data": {
                      "nullable": true
                    },
                    "msgList": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "attrs": {
                      "type": "object"
                    },
                    "status": {
                      "type": "string",
                      "example": "Success"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "basicAuth": []
          }
        ]
      }
    },
    "/bnpl/additional/get": {
      "get": {
        "summary": "Харилцагчийн нэмэлт мэдээлэл лавлах",
        "description": "Харилцагч үүссэн бол үүссэн харилцагчийн ID-г, үүссээгүй бол харилцагч шинээр үүсгэж ID-г буцаана",
        "operationId": "getAdditionalInfo",
        "tags": ["Харилцагчийн нэмэлт мэдээлэл"],
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "description": "Харилцагчийн дугаар",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Амжилттай",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "type": "object",
                      "properties": {
                        "userId": {
                          "type": "integer",
                          "description": "Харилцагчийн дугаар",
                          "example": 269912
                        },
                        "facebook": {
                          "type": "string",
                          "description": "Facebook хаяг",
                          "example": "Тест хаяг"
                        },
                        "mobile1": {
                          "type": "string",
                          "description": "Нэмэлт дугаар 1",
                          "example": "99669966"
                        },
                        "mobile2": {
                          "type": "string",
                          "description": "Нэмэлт дугаар 2",
                          "example": "99669966"
                        },
                        "familyList": {
                          "type": "array",
                          "description": "Гэр бүлийн гишүүдийн мэдээлэл",
                          "items": {
                            "type": "object",
                            "properties": {
                              "relType": {
                                "type": "string",
                                "description": "Хэн болох",
                                "example": "Ээж"
                              },
                              "lastName": {
                                "type": "string",
                                "description": "Овог",
                                "example": "Овог"
                              },
                              "firstName": {
                                "type": "string",
                                "description": "Нэр",
                                "example": "Нэр"
                              },
                              "workplaceName": {
                                "type": "string",
                                "description": "Ажлын газар",
                                "example": "Ажлын газар"
                              },
                              "mobile": {
                                "type": "string",
                                "description": "Утасны дугаар",
                                "example": "94949494"
                              }
                            }
                          }
                        },
                        "emergencyList": {
                          "type": "array",
                          "description": "Яаралтай тохиолдолд холбоо барих хүмүүс",
                          "items": {
                            "type": "object",
                            "properties": {
                              "relType": {
                                "type": "string",
                                "description": "Хэн болох",
                                "example": "Найз 1"
                              },
                              "lastName": {
                                "type": "string",
                                "description": "Овог",
                                "example": "Найз 1 овог"
                              },
                              "firstName": {
                                "type": "string",
                                "description": "Нэр",
                                "example": "Найз 1 нэр"
                              },
                              "workplaceName": {
                                "type": "string",
                                "description": "Ажлын газар",
                                "example": "Найз 1 ажлын газар"
                              },
                              "mobile": {
                                "type": "string",
                                "description": "Утасны дугаар",
                                "example": "96969696"
                              }
                            }
                          }
                        }
                      }
                    },
                    "data": {
                      "nullable": true
                    },
                    "msgList": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "attrs": {
                      "type": "object"
                    },
                    "status": {
                      "type": "string",
                      "example": "Success"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "basicAuth": []
          }
        ]
      }
    },
    "/bnpl/additional/merge": {
      "post": {
        "summary": "Харилцагчийн нэмэлт мэдээлэл үүсгэх",
        "description": "Харилцагч үүссэн бол үүссэн харилцагчийн ID-г, үүссээгүй бол харилцагч шинээр үүсгэж ID-г буцаана",
        "operationId": "createAdditionalInfo",
        "tags": ["Харилцагчийн нэмэлт мэдээлэл"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["userId", "facebook", "mobile1", "mobile2", "familyList", "emergencyList"],
                "properties": {
                  "userId": {
                    "type": "integer",
                    "description": "Харилцагчийн дугаар",
                    "example": 269912
                  },
                  "facebook": {
                    "type": "string",
                    "description": "Facebook хаяг",
                    "minLength": 10,
                    "maxLength": 100,
                    "example": "Тест хаяг"
                  },
                  "mobile1": {
                    "type": "string",
                    "description": "Нэмэлт дугаар 1",
                    "example": "99669966"
                  },
                  "mobile2": {
                    "type": "string",
                    "description": "Нэмэлт дугаар 2",
                    "example": "99669966"
                  },
                  "familyList": {
                    "type": "array",
                    "description": "Гэр бүлийн гишүүдийн мэдээлэл / Зөвхөн гэр бүлд байгаа хүмүүс/",
                    "items": {
                      "type": "object",
                      "required": ["relType", "lastName", "firstName", "workplaceName", "mobile"],
                      "properties": {
                        "relType": {
                          "type": "string",
                          "description": "Хэн болох",
                          "example": "Ээж"
                        },
                        "lastName": {
                          "type": "string",
                          "description": "Овог",
                          "example": "Овог"
                        },
                        "firstName": {
                          "type": "string",
                          "description": "Нэр",
                          "example": "Нэр"
                        },
                        "workplaceName": {
                          "type": "string",
                          "description": "Ажлын газар",
                          "example": "Ажлын газар"
                        },
                        "mobile": {
                          "type": "string",
                          "description": "Утасны дугаар",
                          "example": "94949494"
                        }
                      }
                    }
                  },
                  "emergencyList": {
                    "type": "array",
                    "description": "Яаралтай тохиолдолд холбоо барих хүн /Найз нөхөд, садан төрлийн хүмүүсийг бичнэ үү/ Заавал 2 хүнийг бичнэ.",
                    "minItems": 2,
                    "maxItems": 2,
                    "items": {
                      "type": "object",
                      "required": ["relType", "lastName", "firstName", "workplaceName", "mobile"],
                      "properties": {
                        "relType": {
                          "type": "string",
                          "description": "Хэн болох",
                          "example": "Найз"
                        },
                        "lastName": {
                          "type": "string",
                          "description": "Овог",
                          "example": "Найз овог"
                        },
                        "firstName": {
                          "type": "string",
                          "description": "Нэр",
                          "example": "Найз нэр"
                        },
                        "workplaceName": {
                          "type": "string",
                          "description": "Ажлын газар",
                          "example": "Найз ажлын газар"
                        },
                        "mobile": {
                          "type": "string",
                          "description": "Утасны дугаар",
                          "example": "96969696"
                        }
                      }
                    }
                  }
                }
              },
              "example": {
                "userId": 269912,
                "facebook": "Тест хаяг",
                "mobile1": "99669966",
                "mobile2": "99669966",
                "familyList": [
                  {
                    "relType": "Ээж",
                    "lastName": "Овог",
                    "firstName": "Нэр",
                    "workplaceName": "Ажлын газар",
                    "mobile": "94949494"
                  }
                ],
                "emergencyList": [
                  {
                    "relType": "Найз",
                    "lastName": "Найз овог",
                    "firstName": "Найз нэр",
                    "workplaceName": "Найз ажлын газар",
                    "mobile": "96969696"
                  },
                  {
                    "relType": "Найз",
                    "lastName": "Найз овог",
                    "firstName": "Найз нэр",
                    "workplaceName": "Найз ажлын газар",
                    "mobile": "96969696"
                  }
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Амжилттай",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "nullable": true
                    },
                    "data": {
                      "nullable": true
                    },
                    "msgList": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "attrs": {
                      "type": "object"
                    },
                    "status": {
                      "type": "string",
                      "example": "Success"
                    }
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "basicAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "securitySchemes": {
      "basicAuth": {
        "type": "http",
        "scheme": "basic",
        "description": "HTTP Basic Authentication. Username болон password-г base64 encode хийж Authorization header-т илгээнэ."
      }
    }
  }
}